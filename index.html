<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui, maximum-scale=1.0, user-scalable=0">
<meta name="keywords" content="Parking,Game"/>
<title>Carcassonne</title>
<script src="score.js?i=1"></script>
<script src="data.js?i=1"></script>
<script src="carc.js?i=1"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
<style>
    body, button, span {
        font-size: 24px;
        touch-action: manipulation;
    }
    body,html {
        position: fixed;
    }
    td {
        padding-top:5px;
    }
    button {
        padding:5px;
    }
    .score, .score span{
        font-size: 24px;
    }
    .noTitleStuff .ui-dialog-titlebar {
        display:none;
    }
    .dialog button {
        font-size: 24px;
    }
</style>
</head>
<body onselectstart="return false;">
    <canvas id="canvas" width="770" height="700" style="margin:0px;float:left" onselectstart="return false;"></canvas>
    <table id="tbl">
        <tr><td>
            <button id="btnNext" onclick="javascript:next()" disabled="true">next</button><br/>
        </td></tr>
        <tr><td class="score">
            stack <span id="tilesLeft"></span><br/>
        </td></tr>
        <tr><td>
            <button onclick="javascript:restartOption()">restart</button>
        </td></tr>
        <tr><td>
            <button onclick="javascript:edit()">edit</button><br/>
        </td></tr>
        <tr><td>
            <button onclick="javascript:rotateBackup()">rotate</button><br/>
        </td></tr>
        <tr><td class="score" id="scorebox0">
            blue <span id="score0"></span> <span id="scorep0"></span><br/>
        </td></tr>
        <tr><td class="score" id="scorebox1">
            red <span id="score1"></span> <span id="scorep1"></span><br/>
        </td></tr>
        <tr><td class="score" id="scorebox2">
            green <span id="score2"></span> <span id="scorep2"></span><br/>
        </td></tr>
        <tr><td class="score" id="scorebox3">
            yellow <span id="score3"></span> <span id="scorep3"></span><br/>
        </td></tr>
        <tr><td class="score" id="scorebox4">
            black <span id="score4"></span> <span id="scorep4"></span><br/>
        </td></tr>
        <tr><td class="score" id="scorebox5">
            pink <span id="score5"></span> <span id="scorep5"></span><br/>
        </td></tr>
        <tr><td>
            <button id="btnPreviousGame" onclick="javascript:switchGame(-1)">&lt;&lt;</button>
            <button id="btnNextGame" onclick="javascript:switchGame(1)">&gt;&gt;</button>
        </td></tr>
        <tr><td>
            <button id="btnDelete" onclick="javascript:deleteTile()">delete</button>
        </td></tr>
        <tr><td>
            <button class="btn" onclick="javascript:copy()">copy</button>
        </td></tr>
    </table>
    <div id="dialogNumber" title="Choose Number" class="dialog">
        <p>Choose Number</p>
    </div>
    <div id="dialogMode" title="Choose Mode" class="dialog">
        <p>
            <label for="c1">Classic</label>
            <input type="checkbox" id="c1" name="gmode" value="classic" checked="checked">
        </p>
        <p>
            <label for="c2">Inns and Cathedrals</label>
            <input type="checkbox" id="c2" name="gmode" value="inn">
        </p>
        <p>
            <label for="c3">Traders & Builders</label>
            <input type="checkbox" id="c3" name="gmode" value="trader">
        </p>
        <p>
            <label for="c4">The River</label>
            <input type="checkbox" id="c4" name="gmode" value="river">
        </p>
        <p>
            <label for="c5">The River II</label>
            <input type="checkbox" id="c5" name="gmode" value="river2">
        </p>
        <p>
            <label for="c6">George</label>
            <input type="checkbox" id="c6" name="gmode" value="george">
        </p>
        <p>
            <label for="c7">Test</label>
            <input type="checkbox" id="c7" name="gmode" value="test">
        </p>
    </div>
</body>
<script>
    var selectedMode = 'classic';
  $(function() {
    $("input").checkboxradio();

    $("#dialogNumber").dialog({
        dialogClass: 'noTitleStuff',
        autoOpen: false,
        resizable: false,
        draggable: false,
        height: "auto",
        width: 400,
        modal: true,
        buttons: {
            "2 players": function() {
                $( this ).dialog( "close" );
                restart(2, true, selectedMode)
            },
            "3 players": function() {
                $( this ).dialog( "close" );
                restart(3, true, selectedMode)
            },
            "4 players": function() {
                $( this ).dialog( "close" );
                restart(4, true, selectedMode)
            },
            "5 players": function() {
                $( this ).dialog( "close" );
                restart(5, true, selectedMode)
            },
            "6 players": function() {
                $( this ).dialog( "close" );
                restart(6, true, selectedMode)
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });
    $("#dialogMode").dialog({
        dialogClass: 'noTitleStuff',
        autoOpen: false,
        resizable: false,
        draggable: false,
        height: "auto",
        width: 400,
        modal: true,
        buttons: {
            "Confirm": function() {
                $( this ).dialog( "close" );
                let modes = [];
                $("input:checkbox[name='gmode']:checked").each(function(){
                    modes.push($(this).val());
                });
                selectedMode = modes.join('|')
                $( "#dialogNumber" ).dialog("open");
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });
  });

  function restartOption() {
    $( "#dialogMode" ).dialog("open");
  }

    init()

    function copy() {
        new ClipboardJS('.btn', {
            text: function() {
                let gameJson = localStorage.getItem("game"+gameId)
                return gameJson
            }
        });
    }
</script>
</html>
